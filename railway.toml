[build]
builder = "heroku/buildpacks:20"

[build.environment]
JAVA_VERSION = "17"
MAVEN_CUSTOM_OPTS = "-DskipTests"
SPRING_PROFILES_ACTIVE = "prod"

[deploy]
startCommand = "java -Dspring.profiles.active=prod -Dserver.port=$PORT -jar target/*.jar"
healthCheckPath = "/api/health"
healthCheckTimeout = 100

[deploy.healthCheck]
path = "/api/health"
timeout = 100
interval = 30
maxRetries = 5
startPeriod = 60

[environment]
JAVA_OPTS = "-Xmx512m -Xms256m"
